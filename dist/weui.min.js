+function(e,o,t){"use strict";function a(o){var t,a=e(this),n=(a.attr("href"),a.dataset());a.hasClass("open-popup")&&(t=n.popup?n.popup:".popup",e.popup(t)),a.hasClass("close-popup")&&(t=n.popup?n.popup:".popup.modal_in",e.closeModal(t,s.useCss3)),a.hasClass("close-offcanvas")&&e.closeModal(".weui_offcanvas.modal_in",s.useCss3),a.hasClass("weui_mask")&&(e(".modal.modal_in").length>0&&s.modalCloseByOutside&&e.closeModal(".modal.modal_in",s.useCss3),e(".weui_actionsheet.modal_in").length>0&&s.actionsCloseByMask&&e.closeModal(".weui_actionsheet.modal_in",s.useCss3)),a.hasClass("popup_overlay")&&(e(".popup.modal_in").length>0&&e.closeModal(".popup.modal_in",s.useCss3),e(".weui_offcanvas.modal_in").length>0&&s.offcanvasCloseByMask&&e.closeModal(".weui_offcanvas.modal_in",s.useCss3))}var n=document.createElement("div");e.modalStack=[],e.queueOffcanvas=[],e.dequeueOffcanvas=function(){return e.queueOffcanvas.shift()()},e.modalStackClearQueue=function(){e.modalStack.length&&e.modalStack.shift()()},e.modal=function(o){o=o||{};var t="",a="",l="undefined"!=typeof o.useCss3?o.useCss3:s.useCss3;if(o.buttons&&o.buttons.length>0)for(var i=0;i<o.buttons.length;i++)a+='<a class="weui_btn_dialog'+(o.buttons[i].close?" default":"")+'">'+o.buttons[i].text+"</a>";var u=o.extraClass||"",d='<div class="weui_dialog_hd"><strong class="weui_dialog_title">'+(o.title?o.title:"提示")+"</strong></div>",c=o.text?'<div class="weui_dialog_bd">'+o.text+"</div>":"",r=o.afterText?o.afterText:"",p=o.buttons&&0!==o.buttons.length?"":"modal-no-buttons",f=o.verticalButtons?"modal-buttons-vertical":"";t='<div class="weui_dialog weui_dialog_'+o.type+'"><div class="weui_dialog_inner '+u+" "+p+" "+o.type+'">'+(d+c+r)+'<div class="weui_dialog_ft '+f+'">'+a+"</div></div></div>",n.innerHTML=t;var v=e(n).children();return e(s.modalContainer).append(v[0]),v.find(".weui_dialog_ft .weui_btn_dialog").each(function(t,a){e(a).on("click",function(a){o.buttons[t].close!==!1&&e.closeModal(v,l),o.buttons[t].onClick&&o.buttons[t].onClick(v,a),o.onClick&&o.onClick(v,t)})}),e.openModal(v,l),v[0]},e.alert=function(o,a,n){return"function"==typeof a&&(n=arguments[1],a=t),e.modal({useCss3:!1,type:"alert",text:o||"",title:"undefined"==typeof a?s.modalTitle:a,buttons:[{text:s.modalButtonOk,onClick:n}]})},e.confirm=function(o,a,n,l){return"function"==typeof a&&(l=arguments[2],n=arguments[1],a=t),e.modal({useCss3:!1,type:"confirm",text:o||"",title:"undefined"==typeof a?s.modalTitle:a,buttons:[{text:s.modalButtonCancel,onClick:l,close:!0},{text:s.modalButtonOk,onClick:n}]})},e.prompt=function(o,a,n){return"function"==typeof o&&(n=arguments[2],a=arguments[1],o=t),e.modal({useCss3:!1,type:"prompt",title:"undefined"==typeof o?s.modalTitle:o,afterText:'<div class="weui_cells weui_cells_form">                <div class="weui_cell">                    <div class="weui_cell_bd weui_cell_primary">                        <textarea class="weui_textarea ipt-result" placeholder="请输入" rows="3"></textarea>                    </div>                </div>            </div>',buttons:[{text:s.modalButtonCancel,close:!0},{text:s.modalButtonOk}],onClick:function(o,t){0===t&&n&&n(e(o).find(".ipt-result").val()),1===t&&a&&a(e(o).find(".ipt-result").val())}})},e.loading=function(o){if(e(".weui_loading_toast")[0])return e(".weui_loading_toast").remove();var t=[];t.push('<div class="weui_loading_toast"><div class="weui_mask_transparent"></div>'),t.push('<div class="weui_toast"><div class="weui_loading">');for(var a=0;11>=a;a++)t.push('<div class="weui_loading_leaf weui_loading_leaf_'+a+'"></div>');t.push("</div>"),t.push('<p class="weui_toast_content">'+(o?o:"数据加载中")+"</p>"),t.push("</div></div>"),e(s.modalContainer).append(t.join(""))},e.actions=function(o){var t,a,l;o=o||[],o.length>0&&!e.isArray(o[0])&&(o=[o]);for(var i,u="",d=0;d<o.length;d++)for(var c=0;c<o[d].length;c++){0===c&&(u+='<div class="weui_actionsheet_menu">');var r=o[d][c],p=r.label?"weui_actionsheet_cell label":"weui_actionsheet_cell";r.bold&&(p+=" actions-modal-button-bold"),r.color&&(p+=" color-"+r.color),r.bg&&(p+=" bg-"+r.bg),r.disabled&&(p+=" disabled"),u+='<div class="'+p+'">'+r.text+"</div>",c===o[d].length-1&&(u+="</div>")}i='<div class="weui_actionsheet">'+u+"</div>",n.innerHTML=i,t=e(n).children(),e(s.modalContainer).append(t[0]),a=".weui_actionsheet_menu",l=".weui_actionsheet_cell";var f=t.find(a);return f.each(function(a,n){var i=a;e(n).children().each(function(a,n){var u,d=a,c=o[i][d];e(n).is(l)&&(u=e(n)),u&&u.on("click",function(o){c.close!==!1&&e.closeModal(t,s.useCss3),c.onClick&&c.onClick(t,o)})})}),e.openModal(t,s.useCss3),t[0]},e.popup=function(o){if("string"==typeof o&&o.indexOf("<")>=0){var t=document.createElement("div");if(t.innerHTML=o.trim(),!(t.childNodes.length>0))return!1;o=t.childNodes[0],e(s.modalContainer).append(o)}return o=e(o),0===o.length?!1:(!e(o).hasClass("popup")&&e(o).addClass("popup"),o.show(),e.openModal(o,s.useCss3),o[0])},e.toast=function(o,t,a){var n=[];n.push('<div class="toast"><div class="weui_mask_transparent"></div>'),t&&t.length?(n.push('<div class="weui_toast"><div class="weui_toast_icon">'+t+"</div>"),n.push('<p class="weui_toast_content">'+o+"</p></div></div>")):n.push('<div class="weui_toast onlytxt">'+o+"</div></div>");var s=e(n.join("")).appendTo(document.body);s.one("opened",function(){setTimeout(function(){e.closeModal(s,!0)},a||2e3)}),e.openModal(s,!0)},e.offcanvas=function(o,t,a){var n={useCss3:!0,content:"",position:t||"top",contentStyle:null,onOpenBefore:null,onOpenAfter:"function"==typeof a?a:null,onCloseBefore:null,onCloseAfter:null};"object"==typeof o?n=e.extend({},n,o):n.content=o;var l=n.content;if("string"==typeof l&&l.indexOf("<")>=0){var i=document.createElement("div");if(i.innerHTML=l.trim(),!(i.childNodes.length>0))return!1;l=i.childNodes[0],e(s.modalContainer).append(l)}var u=e(l);return!u.hasClass("weui_offcanvas")&&u.addClass("weui_offcanvas"),"function"==typeof n.onOpenBefore&&u.one("open",function(){n.onOpenBefore.call(this,u)}),"function"==typeof n.onOpenAfter&&u.one("opened",function(){n.onOpenAfter.call(this,u)}),"function"==typeof n.onCloseBefore&&u.one("close",function(){n.onCloseBefore.call(this,u)}),"function"==typeof n.onCloseAfter&&u.one("closed",function(){n.onCloseafter.call(this,u)}),e.openModal(l,n.useCss3,n)},e.openModal=function(o,t,a){o=e(o);var n=o.hasClass("modal"),l=!o.hasClass("toast"),i=!!a,u=o.hasClass("popup"),d=o.hasClass("toast");if(e(".modal.modal_in:not(.modal_out)").length&&s.modalStack&&n&&l)return void e.modalStack.push(function(){e.openModal(o,t)});if(e(".weui_offcanvas.modal_in:not(.modal_out)").length&&s.modalStack&&i){var c=e(".weui_offcanvas.modal_in");return e.queueOffcanvas.push(function(){e.openModal(o,t,a)}),void e.closeModal(c,t)}n&&(o.show(),o.css({marginTop:-Math.round(o.outerHeight()/2)+"px"})),d&&o.css({marginLeft:-Math.round(o.outerWidth()/2/1.185)+"px"}),i&&(a.position&&o.addClass(a.position),a.contentStyle&&o.css(a.contentStyle),o.show());var r;d||(0!==e(".weui_mask").length||u||i||e(s.modalContainer).append('<div class="weui_mask"></div>'),0===e(".popup_overlay").length&&(u||i)&&e(s.modalContainer).append('<div class="popup_overlay"></div>'),r=e(u||i?".popup_overlay":".weui_mask"));o[0].clientLeft;return o.trigger("open"),d||r.addClass("weui_mask_visible"),o.removeClass("modal_out").addClass("modal_in").transitionEnd(function(e){o.hasClass("modal_out")?o.trigger("closed"):o.trigger("opened")},t),"function"==typeof cb&&cb.call(this,o),!0},e.closeModal=function(o,t){if(o=e(o||".weui_dialog"),"undefined"==typeof o||0!==o.length){var a=o.hasClass("weui_dialog"),n=o.hasClass("popup"),l=o.hasClass("toast"),i=o.hasClass("weui_offcanvas"),u=e(n||i?".popup_overlay":".weui_mask");return i?!e.queueOffcanvas.length&&u.removeClass("weui_mask_visible"):n?o.length===e(".popup.modal_in").length&&u.removeClass("weui_mask_visible"):l||u.removeClass("weui_mask_visible"),o.trigger("close"),o.removeClass("modal_in").addClass("modal_out").transitionEnd(function(t){o.hasClass("modal_out")?o.trigger("closed"):o.trigger("opened"),n||i?(o.removeClass("modal_out").hide(),o.length>0&&o.remove()):o.remove(),i&&e.queueOffcanvas.length&&e.dequeueOffcanvas()},t),a&&s.modalStack&&e.modalStackClearQueue(),!0}},e(document).on("click",".weui_mask, .popup_overlay, .close-popup, .open-popup, .close-offcanvas",a);var s=e.modal.prototype.defaults={useCss3:!0,modalStack:!0,modalCloseByOutside:!1,actionsCloseByMask:!0,offcanvasCloseByMask:!0,modalButtonOk:"确定",modalButtonCancel:"取消",modalPreloaderTitle:"加载中",modalContainer:document.body?document.body:"body"}}(Zepto,window,void 0);